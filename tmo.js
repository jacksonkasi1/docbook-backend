Jackson Kasi
jacksonkasi
Online

Andalib — 01/12/2024 12:40 PM
okk
Andalib — Yesterday at 11:41 AM
hi kasi need one small help
Jackson Kasi — Yesterday at 11:41 AM
s
Andalib — Yesterday at 11:42 AM
can i call ?
Jackson Kasi — Yesterday at 11:43 AM
for call can u give me some time! bcz i lost my vision noted point. i need rewrite & need to give piyush bro! so
Andalib — Yesterday at 11:43 AM
okay no issues once free plzz call me
Jackson Kasi — Yesterday at 11:43 AM
thanks!
Jackson Kasi — Yesterday at 11:53 AM
hi! now u can call me
Andalib — Yesterday at 11:54 AM
okay
Andalib
 started a call that lasted 6 minutes.
 — Yesterday at 11:54 AM
Jackson Kasi — Yesterday at 12:00 PM
jacksonkasipeacock@gmail.com
Andalib — Yesterday at 12:03 PM
https://drive.google.com/file/d/1JHOI8nRzXV9HtRZEA_dONnTiSeVwlGlj/view?usp=drive_link
Google Docs
Record_2024-01-17-07-06-04.mp4
Jackson Kasi — Yesterday at 12:04 PM
can i get repo access
Andalib — Yesterday at 12:04 PM
already give
Jackson Kasi — Yesterday at 12:04 PM
link
ok i check my mail
Andalib — Yesterday at 12:05 PM
give me 5 mins i will give apk also
Jackson Kasi — Yesterday at 12:05 PM
ok
Andalib — Yesterday at 12:23 PM
do u need apk ?
coz even if i will give apk it will not work
Jackson Kasi — Yesterday at 12:29 PM
i check code it's exicute fine
in video also it's working fine
Andalib — Yesterday at 12:30 PM
yea coz in video i have used localhost
Jackson Kasi — Yesterday at 12:30 PM
ohh! ok ok
then fine u can share me the mobile app
Andalib — Yesterday at 12:30 PM
thats why but in deployed version of vercel its not working
Jackson Kasi — Yesterday at 12:30 PM
with using vercel link
i will check
Andalib — Yesterday at 12:31 PM
i have deployed in my vercel account
Jackson Kasi — Yesterday at 12:31 PM
yeah! that's no a problem! i have vercel endpoint
Andalib — Yesterday at 12:31 PM
okay then
https://docbook-backend.vercel.app/ ----- base url
Jackson Kasi — Yesterday at 12:33 PM
yeah!
Jackson Kasi — Yesterday at 1:03 PM
one think i forgot!
Andalib — Yesterday at 1:04 PM
yea say
Jackson Kasi — Yesterday at 1:04 PM
Vercel functions are serverless. so its not possible to run corn
bcz once function run it will stop this work
Andalib — Yesterday at 1:04 PM
ohkkk
Jackson Kasi — Yesterday at 1:04 PM
so for checking that i deployin the site in render
i will share link
u can check it once
Andalib — Yesterday at 1:05 PM
okay thanks
share with me the base url
Jackson Kasi — Yesterday at 1:05 PM
sure
render deployment will take 4 - 5 min! until that u can try with this.

https://3000-andaliboper-docbookback-7tvahjbs5hu.ws-us107.gitpod.io/refresh
my gitpod server link
Andalib — Yesterday at 1:06 PM
okay
Jackson Kasi — Yesterday at 1:06 PM
https://docbook-be.onrender.com/ ( but still in deploy stagem it will 4 - 5 min to finish deploy )
Andalib — Yesterday at 1:06 PM
okay
Jackson Kasi — Yesterday at 1:08 PM
now deployed
Andalib — Yesterday at 1:08 PM
okay
Jackson Kasi — Yesterday at 1:13 PM
just like to know! in onreder is working?
Andalib — Yesterday at 1:13 PM
i am checking that only scheduled reminder just now
need to wait for 2 mins
Jackson Kasi — Yesterday at 1:14 PM
okay! fine
Andalib — Yesterday at 1:15 PM
no its not working
Jackson Kasi — Yesterday at 1:16 PM
ooops!
even with gitpod link also not working ha?
Andalib — Yesterday at 1:16 PM
gitpod lemme try
Jackson Kasi — Yesterday at 1:17 PM
yeah now u can try
Andalib — Yesterday at 1:17 PM
okay i m try this only
Jackson Kasi — Yesterday at 1:18 PM
ok
just one suggestion!

if u want o tmonotor ur corn job u can try

https://upstash.com/docs/qstash/overall/getstarted
Upstash Documentation
Getting Started - Upstash Documentation
Getting Started - Upstash Documentation
https://upstash.com/docs/qstash/features/schedules
Upstash Documentation
Schedules - Upstash Documentation
Schedules - Upstash Documentation
Andalib — Yesterday at 1:20 PM
i dont know backend much kasi
Jackson Kasi — Yesterday at 1:20 PM
ohh! okay
Andalib — Yesterday at 1:21 PM
not working with gitpod link also
Jackson Kasi — Yesterday at 1:21 PM
ohh! it's just the same code running
i need to help with that? if it's important for u! my task i can do after this so i askinng
Andalib — Yesterday at 1:22 PM
why cron is not working ?
Andalib — Yesterday at 1:22 PM
please help
Jackson Kasi — Yesterday at 1:22 PM
really not sure. i need to add debugger
Jackson Kasi — Yesterday at 1:22 PM
okay! after update this code i ping for checking
Andalib — Yesterday at 1:23 PM
okay
Jackson Kasi — Yesterday at 1:27 PM
if possible can u send me that firbase code what u using form mobile app?
i will do this fully in be!
Andalib — Yesterday at 1:29 PM
import {
  StyleSheet,
  Text,
  View,
  useWindowDimensions,
  KeyboardAvoidingView,
Expand
Reminder.js
16 KB
Jackson Kasi — Yesterday at 1:29 PM
thanks!
Andalib — Yesterday at 1:29 PM
just adding the reminder and updating the reminder
Jackson Kasi — Yesterday at 1:29 PM
if u don't mind i will do this after my lunch plz
Andalib — Yesterday at 1:29 PM
okay no issues
Jackson Kasi — Yesterday at 1:29 PM
thanks!
Andalib — Yesterday at 1:44 PM
once its completed plzz ping me i will do it in app
Jackson Kasi — Yesterday at 2:05 PM
okay!
Jackson Kasi — Yesterday at 4:49 PM
https://github.com/jacksonkasi1/docbook-backend

u can check this code 
GitHub
GitHub - jacksonkasi1/docbook-backend
Contribute to jacksonkasi1/docbook-backend development by creating an account on GitHub.
GitHub - jacksonkasi1/docbook-backend
updated with this api in repo api in onrender server
Jackson Kasi — Yesterday at 5:03 PM
now this will work fine
but i am going to include https://upstash.com/

so after integrated upstash.com no need to call refresh api to check all corn job every time! 

bcz that all corn job will handled by upstash.com
Upstash: Serverless Data for Redis® and Kafka®
Upstash: Serverless Data for Redis® and Kafka®
Designed for the serverless with per-request pricing and Redis®/Kafka® API.
Upstash: Serverless Data for Redis® and Kafka®
i will do this after some work! i will info to u if its done
Andalib — Yesterday at 5:46 PM
Okay thanks
Jackson Kasi — Yesterday at 8:14 PM
just info!

https://www.youtube.com/watch?v=TthS0MPTy0A
https://www.youtube.com/watch?v=sMteczGPFD4

i like to recoment to learn how to use trpc api with expo or reaact native.

bcz upcomming one project we will use trpc so!
YouTube
Theo - t3․gg
The BEST Starting Point For Your Next Mobile App
Image
YouTube
Club Of Coders
Let's talk about React Native, tRPC, NativeWind, Expo, Monorepo/Tur...
Image
Andalib — Today at 6:50 AM
Hi good morning
Andalib — Today at 6:51 AM
once u r back please share with me the baseurl with endpoint of docbook refresh part 
Jackson Kasi — Today at 9:42 AM
this is base url
and for api end point u cana check code
Andalib — Today at 9:43 AM
okay
Andalib — Today at 11:04 AM
kasi need 1 help from u
Jackson Kasi — Today at 11:30 AM
anything urgent? bcz now i have urgent work in vision so
Andalib — Today at 11:30 AM
ohkay no issues u do ur work
Jackson Kasi — Today at 11:30 AM
ok thanks!
hi i am back to 
import {
  StyleSheet,
  Text,
  View,
  useWindowDimensions,
  KeyboardAvoidingView,
  ScrollView,
  TouchableOpacity,
  Dimensions,
} from 'react-native';
import React, {useCallback, useEffect, useState} from 'react';
import CustomHeader from '../../components/headers/CustomHeader';
import {
  black,
  darkGrey,
  darkPlaceholder,
  labelGrey,
  primaryColor,
  white,
} from '../../styles/colors';
import Input from '../../components/inputs/Input';
import Feather from 'react-native-vector-icons/Feather';
import DatePicker from 'react-native-date-picker';
import moment from 'moment';
import {Dropdown} from 'react-native-element-dropdown';
import {primaryConsultant, weekData} from '../../mockData/dropDownData';
import {fontFamilyMedium} from '../../styles/globalStyles';
import CustomButton from '../../components/ui/CustomButton';
import {useFocusEffect} from '@react-navigation/native';
import firestore from '@react-native-firebase/firestore';
import {useSelector} from 'react-redux';
import scheduleLocalNotification from '../../helpers/ScheduleNotification';
import scheduleNotification from '../../helpers/ScheduleNotification';

const Reminder = ({navigation, route}) => {
  const {docId, passed, data} = route.params;
  const {fontScale} = useWindowDimensions();
  const styles = makeStyles(fontScale);
  const [type, setType] = useState('Daily');
  const typeData = ['Daily', 'Weekly', 'Monthly', 'Yearly'];
  const [date, setDate] = useState(new Date());
  const [open, setOpen] = useState(false);
  const [time, setTime] = useState(new Date());
  const [openTime, setOpenTime] = useState(false);
  const [repeatFrequency, setRepeatFrequency] = useState('');
  const [repeatDyas, setRepeatDays] = useState(['Monday']);
  const [reminderData, setReminderData] = useState([]);
  const [reminder, setReminder] = useState([]);
  const authState = useSelector(state => state.authState);
  const fetchData = async () => {
    try {
      const collectionRef = firestore().collection('Reminder');
      const snapshot = await collectionRef.get();

      const data = [];
      snapshot.forEach(doc => {
        const { date, time, patientName} = doc.data();
        console.log("date", date, time,patientName, doc.data())
        data.push({
          id: doc.id,
          ...doc.data(),
        });
      });
      setReminderData(data);
    } catch (error) {
      console.error('Error fetching data: reminder ', error);
    }
  };
  useFocusEffect(
    useCallback(() => {
      fetchData();
    }, [passed]),
  );
  const onDaysSelect = e => {
    if (repeatDyas.includes(e)) {
      setRepeatDays(repeatDyas.filter(item => item !== e));
    } else {
      setRepeatDays([...repeatDyas, e]);
    }
  };
  useEffect(() => {
    if (reminderData == undefined) {
      return;
    } else {
      setReminder(reminderData.filter(i => i?.patientId === passed?.patientId));
    }
  }, [reminderData, passed]);
  // useFocusEffect(
  //   useCallback(() => {
  //     if (reminder[0] !== undefined) {
  //       setRepeatFrequency(reminder[0]?.repeatFrequency);
  //       setRepeatDays(reminder[0]?.repeatDays);
  //       setType(reminder[0]?.type);
  //       setDate(new Date());
  //       setTime(new Date());
  //     } else {
  //       setRepeatFrequency('');
  //       setRepeatDays(['Monday']);
  //       setType('Daily');
  //       setDate(new Date());
  //       setTime(new Date());
  //     }
  //   }, [reminder]),
  // );

  const onSetReminder = () => {
    console.log('here hitting', reminder[0]);
    if (reminder[0] !== undefined) {
      firestore()
        .collection('Reminder')
        .doc(reminder[0]?.id)
        .update({
          patientName: data?.patientName,
          hospitalName: data?.hospitalName,
          patientId: data?.patientId,
          type: type,
          date: moment(date).format('YYYY-MM-DD'),
          time: time.toLocaleTimeString(),
          repeatFrequency: repeatFrequency,
          repeatDays: repeatDyas,
          uid: authState?.uuid,
        })
        .then(() => {
          console.log('Reminder Updated');
          // http://192.168.1.81:3000/refresh
          // https://docbook-backend.vercel.app/refresh
          fetch(
            'https://3000-andaliboper-docbookback-7tvahjbs5hu.ws-us107.gitpod.io/refresh',
          ).then(() => {
            navigation.goBack();
            setRepeatFrequency('');
            setRepeatDays(['Monday']);
            setType('Daily');
            setDate(new Date());
            setTime(new Date());
          });
        })
        .catch(err => {
          console.log('unable to update reminder', err);
        });
    } else {
      firestore()
        .collection('Reminder')
        .add({
          patientName: data?.patientName,
          hospitalName: data?.hospitalName,
          patientId: data?.patientId,
          type: type,
          date: moment(date).format('YYYY-MM-DD'),
          time: time.toLocaleTimeString(),
          repeatFrequency: repeatFrequency,
          repeatDays: repeatDyas,
          uid: authState?.uuid,
        })
        .then(() => {
          console.log('Reminder Added');
          fetch(
            'https://3000-andaliboper-docbookback-7tvahjbs5hu.ws-us107.gitpod.io/refresh',
          ).then(() => {
            navigation.goBack();
            setRepeatFrequency('');
            setRepeatDays(['Monday']);
            setType('Daily');
            setDate(new Date());
            setTime(new Date());
          });
        })
        .catch(() => {
          console.log('unable to add reminder');
        });
    }
  };
  return (
    <View style={styles.container}>
      <KeyboardAvoidingView behavior="padding" keyboardVerticalOffset={20}>
        <ScrollView>
          <CustomHeader back={true} title={'Reminder'} />
          <View style={styles.inputContainer}>
            {/* type */}
            <View style={[styles.middleContainer]}>
              <Text style={styles.headingText}>Type</Text>
              <View style={styles.genderContainer}>
                {typeData.map(item => {
                  return (
                    <TouchableOpacity
                      style={[
                        styles.genderButton,
                        {
                          backgroundColor: type == item ? primaryColor : '#fff',
                        },
                      ]}
                      onPress={() => setType(item)}>
                      <Text
                        style={[
                          styles.genderText,
                          {
                            color: type == item ? white : '#8f8f8f',
                          },
                        ]}>
                        {item}
                      </Text>
                    </TouchableOpacity>
                  );
                })}
              </View>
            </View>
            {/* Date Time */}
            <View
              style={[
                styles.middleContainer,
                {
                  marginTop: '5%',
                  flexDirection: 'row',
                  justifyContent: 'space-between',
                  paddingHorizontal: 10,
                },
              ]}>
              <View>
                <Text style={styles.headingText}>Date</Text>
                <View
                  style={[
                    styles.emailmain,
                    {
                      width: 170,
                      flexDirection: 'row',
                      justifyContent: 'space-between',
                      alignItems: 'center',
                      paddingHorizontal: 5,
                    },
                  ]}>
                  <Input
                    style={styles.input}
                    onChangeText={() => {}}
                    value={moment(date).format('DD MMM YYYY')}
                    placeholder="Date"
                    placeholderTextColor={labelGrey}
                    editable={false}
                  />
                  <TouchableOpacity onPress={() => setOpen(!open)}>
                    <Feather name={'calendar'} size={24} color={darkGrey} />
                  </TouchableOpacity>
                </View>
                <DatePicker
                  modal
                  open={open}
                  date={date}
                  mode="date"
                  onConfirm={date => {
                    setOpen(false);
                    setDate(date);
                  }}
                  onCancel={() => {
                    setOpen(false);
                  }}
                />
              </View>
              {/* á¹¬o date */}
              <View>
                <Text style={styles.headingText}>Time</Text>
                <View
                  style={[
                    styles.emailmain,
                    {
                      width: 170,
                      flexDirection: 'row',
                      justifyContent: 'space-between',
                      alignItems: 'center',
                      paddingHorizontal: 5,
                    },
                  ]}>
                  <Input
                    style={styles.input}
                    onChangeText={() => {}}
                    value={moment(time).format('hh: mm A')}
                    placeholder="Time"
                    placeholderTextColor={labelGrey}
                    editable={false}
                  />
                  <TouchableOpacity onPress={() => setOpenTime(!openTime)}>
                    <Feather name={'clock'} size={24} color={darkGrey} />
                  </TouchableOpacity>
                </View>
                <DatePicker
                  modal
                  open={openTime}
                  date={time}
                  mode="time"
                  onConfirm={date => {
                    setOpenTime(false);
                    setTime(date);
                  }}
                  onCancel={() => {
                    setOpenTime(false);
                  }}
                />
              </View>
            </View>
            {/* Repeat Frequency */}
            <View
              style={[
                styles.middleContainer,
                {
                  marginTop: '5%',
                  flexDirection: 'row',
                  justifyContent: 'space-between',
                  paddingHorizontal: 10,
                },
              ]}>
              <View>
                <Text style={styles.headingText}>Repeat Frequency</Text>
                <View
                  style={[
                    styles.emailmain,
                    {
                      width: 170,
                      backgroundColor: '#fff',
                    },
                  ]}>
                  <Dropdown
                    style={[styles.dropdown, {width: width / 1.16}]}
                    placeholderStyle={styles.placeholderStyle}
                    selectedTextStyle={styles.selectedTextStyle}
                    inputSearchStyle={styles.inputSearchStyle}
                    iconStyle={styles.iconStyle}
                    fontFamily={fontFamilyMedium}
                    itemTextStyle={{color: black}}
                    data={primaryConsultant}
                    search
                    maxHeight={300}
                    labelField="label"
                    valueField="value"
                    placeholder={'Choose'}
                    searchPlaceholder="Search..."
                    value={repeatFrequency}
                    onChange={item => {
                      setRepeatFrequency(item.value);
                    }}
                  />
                </View>
              </View>
            </View>
            {/* Repeat Days */}
            <View style={[styles.middleContainer]}>
              <Text style={styles.headingText}>Repeat days</Text>
              <View style={styles.genderContainer}>
                <ScrollView horizontal>
                  {weekData.map(item => {
                    return (
                      <TouchableOpacity
                        style={[
                          styles.repeatDaysButton,
                          {
                            backgroundColor: repeatDyas.includes(item.value)
                              ? primaryColor
                              : darkPlaceholder,
                          },
                        ]}
                        onPress={() => onDaysSelect(item.value)}>
                        <Text
                          style={[
                            styles.genderText,
                            {
                              color: repeatDyas.includes(item.value)
                                ? white
                                : '#8f8f8f',
                            },
                          ]}>
                          {item.label}
                        </Text>
                      </TouchableOpacity>
                    );
                  })}
                </ScrollView>
              </View>
            </View>
          </View>
        </ScrollView>
          <CustomButton
            style={styles.saveButton}
            onPress={onSetReminder}
            title={'SAVE'}
          />
      </KeyboardAvoidingView>
    </View>
  );
};

export default Reminder;
const width = Dimensions.get('window').width;
const makeStyles = fontScale =>
  StyleSheet.create({
    container: {
      flex: 1,
      backgroundColor: '#fff',
    },
    inputContainer: {
      paddingHorizontal: 20,
      paddingVertical: 10,
      paddingBottom: 80,
    },
    middleContainer: {
      marginTop: '5%',
    },
    headingText: {
      marginLeft: '3%',
      fontSize: 14 / fontScale,
      fontFamily: 'Poppins-Medium',
      color: '#8f8f8f',
    },
    genderContainer: {
      flexDirection: 'row',
      alignItems: 'center',
      justifyContent: 'space-between',
    },
    genderText: {
      fontSize: 14 / fontScale,
      fontFamily: 'Poppins-Medium',
      color: '#8f8f8f',
    },
    genderButton: {
      backgroundColor: '#fff',
      padding: 10,
      margin: 5,
      borderColor: darkPlaceholder,
      borderWidth: 1,
      borderRadius: 5,
      justifyContent: 'center',
      alignItems: 'center',
      alignSelf: 'center',
      width: '21%',
    },
    emailmain: {
      width: '95%',
      paddingVertical: 5,
      backgroundColor: darkPlaceholder,
      color: black,
      paddingLeft: 5,
      borderRadius: 5,
      justifyContent: 'center',
      alignSelf: 'center',
      marginTop: '1%',
    },
    dropdown: {
      height: 50,
      borderColor: 'gray',
      borderWidth: 0,
      backgroundColor: darkPlaceholder,
      borderRadius: 8,
      width: width / 2.5,
      paddingHorizontal: 8,
      color: '#000',
    },
    placeholderStyle: {
      fontSize: 16,
      color: '#000',
    },
    selectedTextStyle: {
      fontSize: 16,
      color: '#000',
    },
    repeatDaysButton: {
      backgroundColor: darkPlaceholder,
      padding: 10,
      margin: 5,
      borderRadius: 100 / 2,
      justifyContent: 'center',
      alignItems: 'center',
      alignSelf: 'center',
      width: '21%',
      flexDirection: 'row',
      height: 50,
      width: 50,
      gap: 5,
    },
    saveButton: {
      position: 'absolute',
      // bottom: 10,
      alignSelf: 'center',
    },
  });
Reminder.js
16 KB